<h3>Mis turnos</h3>

<input class="form-control mb-3" [ngModel]="q()" (ngModelChange)="q.set($event)" placeholder="Filtrar por especialidad o especialista..."/>



<div class="table-responsive">
  <table class="table align-middle">
    <thead>
      <tr>
        <th>Fecha</th><th>Hora</th><th>Especialidad</th><th>Especialista</th><th>Estado</th><th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of filtered()">
        <td>{{ t.fecha | date:'d/MM' }}</td>
        <td>{{ t.hora  | date:'HH:mm' }}</td>
        <td>{{ t.especialidad_nombre }}</td>
        <td>{{ t.especialista_nombre }}</td>
        <td><span class="badge" [attr.data-status]="t.estado">{{ t.estado }}</span></td>
        <td class="d-flex flex-wrap gap-1">
          <button class="btn btn-sm btn-outline-danger" *ngIf="canCancel(t)" (click)="cancelar(t)">Cancelar</button>
          <button class="btn btn-sm btn-outline-secondary" *ngIf="hasResena(t)" (click)="verResena(t)">Ver reseña</button>
          <button  class="btn btn-sm btn-outline-primary"    *ngIf="canSurvey(t)"    (click)="abrirEncuesta(t)" > Completar encuesta </button>
          <button class="btn btn-sm btn-success" *ngIf="canFeedback(t)" (click)="feedback(t)">Calificar atención</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
