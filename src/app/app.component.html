<main class="app-main" [@routeAnimations]="prepareRoute()">
  <nav class="navbar navbar-expand-lg bg-body-tertiary px-3">
    <a class="navbar-brand" routerLink="/">
  {{ 'nav.title' | t }}
</a>

  <select
  class="form-select form-select-sm w-auto me-3"
  [ngModel]="currentLang()"
  (ngModelChange)="changeLang($event)"
>
  <option value="es">ES</option>
  <option value="en">EN</option>
  <option value="pt">PT</option>
</select>

    <div class="ms-auto d-flex align-items-center gap-2">
      <ng-container
        *ngIf="
          ready() &&
            isLogged() &&
            !(
              profile()?.role === 'especialista' &&
              profile()?.is_approved === false
            );
          else loggedOut
        "
      >
        <span class="text-muted">
          Hola, {{ profile()?.nombre || "Usuario" }}
        </span>

<a
  class="btn btn-outline-primary btn-sm"
  *ngIf="profile()?.role === 'admin'"
  routerLink="/admin/usuarios"
>
  {{ 'nav.users' | t }}
</a>

<a class="btn btn-outline-secondary btn-sm" routerLink="/perfil">
  <i class="bi bi-person-circle me-1"></i>
  {{ 'nav.profile' | t }}
</a>

       <button class="btn btn-warning btn-sm" (click)="logout()">
  {{ 'nav.logout' | t }}
</button>
      </ng-container>

      <ng-template #loggedOut>
<a class="btn btn-outline-secondary btn-sm" routerLink="/login">
  {{ 'nav.login' | t }}
</a>
<a class="btn btn-primary btn-sm" routerLink="/registro">
  {{ 'nav.register' | t }}
</a>

      </ng-template>
    </div>
  </nav>

  <ng-container *ngIf="ready(); else booting">
    <router-outlet></router-outlet>
  </ng-container>

  <ng-template #booting>
    <div class="text-center mt-5">Cargando...</div>
  </ng-template>

  <app-loader [active]="loader.active()"></app-loader>
  <app-toasts></app-toasts>
</main>
