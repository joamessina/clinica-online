<nav class="navbar navbar-expand-lg bg-body-tertiary px-3">
  <a class="navbar-brand" routerLink="/">Cl√≠nica Online</a>
  <div class="ms-auto d-flex align-items-center gap-2">
    <ng-container *ngIf="isLogged(); else loggedOut">
      <span class="text-muted">Hola, {{ profile()?.nombre || "Usuario" }}</span>
      <a
        class="btn btn-outline-primary btn-sm"
        routerLink="/admin/usuarios"
        *ngIf="profile()?.role === 'admin'"
        >Usuarios</a
      >
      <button class="btn btn-warning btn-sm ms-2" (click)="logout()">
        Salir
      </button>
    </ng-container>
    <ng-template #loggedOut>
      <a class="btn btn-outline-secondary btn-sm" routerLink="/login">Login</a>
      <a class="btn btn-primary btn-sm" routerLink="/registro">Registro</a>
    </ng-template>
  </div>
</nav>

<ng-container *ngIf="ready(); else booting">
  <router-outlet></router-outlet>
</ng-container>
<ng-template #booting>
  <div class="text-center mt-5">Cargando...</div>
</ng-template>

<!-- Overlay global del loader -->
<app-loader [active]="loader.active()"></app-loader>
<router-outlet></router-outlet>
<app-toasts></app-toasts>
